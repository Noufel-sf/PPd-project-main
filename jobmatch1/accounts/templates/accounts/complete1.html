{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Profile - JobMatch</title>
    <link rel="stylesheet" href="{% static 'accounts/css/complete1.css' %}">
    <link rel="stylesheet" href="https://site-assets.fontawesome.com/releases/v6.4.2/css/all.css">   
</head>
<body>
    <div class="container">
        {% comment %} <header>
            <div class="logo">
                <h1><span class="job">Job</span><span class="match">Match</span></h1>
            </div>
            <button id="menu-toggle">
                <i class="fa-solid fa-bars"></i>
            </button>
            <nav id="nav-menu">
                <a href="{% url 'home' %}" id="home-link">Home</a>
                <a href="{% url 'jobapp_page' %}">Jobs</a>
                <a href="#">Contact Us</a>
                <a href="#">About</a>
                <form action="{% url 'logout' %}" method="POST" onsubmit="clearTokens()" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="logout-btn">Log Out</button>
                </form>
            </nav>
        </header> {% endcomment %}

        <main>
            <h2>Personal Information</h2>
            <form id="completeprofile" method="POST" action="{% url 'complete_profile' %}">
                {% csrf_token %}
                <div id="Birthday">
                    <p>Your Birthday</p>
                    <input type="date" name="date" id="date" required>
                </div>
                <br>
                <div id="Number">
                    <p>Contact Number</p>
                    <input type="tel" name="nbr" id="nbr" required placeholder="e.g. +213 794578843">
                    <div id="number_error" style="color: red;"></div>
                </div>
                <br>
                <div id="Address">
                    <p>Residential Address</p>
                    <input type="text" name="address" id="address" required placeholder="Street, City, Postal Code, etc.">
                </div>
                <br>
                <div>
                    <button type="submit" class="button">Next</button>
                </div>
            </form>
        </main>
    </div>
    <script>
        // Get the form and input elements
        const form = document.getElementById("completeprofile");
        const contactInput = document.getElementById("nbr");
        const errorContainer = document.getElementById("number_error");

        // Define patterns
        const pattern1 = /^0\d{9}$/;         // e.g., 0794578843
        const pattern2 = /^\+213\d{9}$/;     // e.g., +213794578843

        // Handle form submission
        form.addEventListener("submit", function (e) {
            const value = contactInput.value.trim();
            errorContainer.innerHTML = ""; // Clear previous error
            errorContainer.style.color = "red"; // Set the error text color to red

            if (value === "") {
                errorContainer.innerHTML = " <strong>Please enter your contact number.</strong>";
                e.preventDefault();
            } else if (!pattern1.test(value) && !pattern2.test(value)) {
                errorContainer.innerHTML = " <strong>Invalid number format!</strong><br>- Should Start With <strong>0</strong> or <strong>+213</strong> followed by 9 digits";
                e.preventDefault();
            }
        });

        // Handle input changes to hide the error message when valid number is entered
        contactInput.addEventListener("input", function () {
            const value = contactInput.value.trim();

            // If the number is valid, clear the error message
            if (pattern1.test(value) || pattern2.test(value)) {
                errorContainer.innerHTML = ""; // Hide the error message
            }
        });

        // Navbar toggle functionality (moved from script.js to ensure it works on this page)
        const menuToggle = document.getElementById("menu-toggle");
        const navMenu = document.getElementById("nav-menu");

        if (menuToggle && navMenu) {
            menuToggle.addEventListener("click", function () {
                console.log("Menu button clicked!");
                navMenu.classList.toggle("active");
            });
        }
    </script>
</body>
</html>